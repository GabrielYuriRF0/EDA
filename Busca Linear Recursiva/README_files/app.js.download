var app = angular.module("lightTst", [ "ngEmoticons", "ngMdIcons", "ngMaterial", 
  "ngSanitize", "ui.router", "angular-loading-bar", "ngAnimate", "ngCookies",
  "ui.bootstrap"]);


app.filter('categoryFilter', function() {
  
  return function(input, buttonCategory) {
    
      var out = [];

      angular.forEach(input, function(activity) {
        // it should be easier than this.
        for (bc in buttonCategory) {
            
            var contains = false;
            
            
            for (var i = 0; i < activity.tags.length; i++) {
              
              if (activity.tags[i] == bc) {
                
                out.push(activity);
                contains = true;
                break;
              }
            
            }

          if (contains)
            break;
            
        }
      
      });

      return out;
    }
});

app.config(['$qProvider', function ($qProvider) {
    $qProvider.errorOnUnhandledRejections(false);
}]);

app.config(function(cfpLoadingBarProvider) {
    cfpLoadingBarProvider.includeBar = true;
});

app.config(function($stateProvider, $urlRouterProvider) {
    $urlRouterProvider.otherwise('/');

    var welcome = {
        name: "welcome",
        url: "/",
        templateUrl: 'view/welcome.html',
    }

    var login = {
      name: "login",
      url: "/login",
      templateUrl: 'view/login.html',
      controller: 'LoginController as loginCtrl'
    }

    var error = {
      name: "default_error",
      url: "/default_error",
      templateUrl: 'view/default_error.html'
    }

    var main = {
      name: "app",
      url: "/app",
      templateUrl: 'view/app.html',
    }

    var home = {
      name: 'app.home',
      url: '/home',
      templateUrl: 'view/home.html',
      controller: 'HomeController as homeCtrl',
    }

    var activity = {
      name: 'app.activity',
      url: '/activity/:name',
      templateUrl: 'view/activity.html',
      controller: 'ActivityController as activityCtrl'
    }

    var instructions = {
      name: 'app.instructions',
      url: '/instructions',
      templateUrl: 'view/instructions.html',
    }

    var analytics = {
      name: 'app.analytics',
      url: '/analytics',
      templateUrl: 'view/analytics.html',
    }
      
    $stateProvider.state(main);
    $stateProvider.state(home);
    $stateProvider.state(activity);
    $stateProvider.state(login);
    $stateProvider.state(error);
    $stateProvider.state(welcome);
    $stateProvider.state(instructions);
    $stateProvider.state(analytics);
    
});

app.config(function($mdThemingProvider) {

    $mdThemingProvider.definePalette('primaryPalette', {
        '50': 'c3fdff',
        '100': 'c3fdff',
        '200': 'c3fdff',
        '300': 'c3fdff',
        '400': 'c3fdff',
        '500': '90caf9',
        '600': '5d99c6',
        '700': '5d99c6',
        '800': '5d99c6',
        '900': '5d99c6',
        'A100': '5d99c6',
        'A200': '5d99c6',
        'A400': '5d99c6',
        'A700': '5d99c6',
        'contrastDefaultColor': 'light',
        'contrastLightColors': ['600', '700', '800', '900'],
        'contrastDarkColors': ['50', '100', '200', '300', '400']
    });

    $mdThemingProvider.theme('default')
        .primaryPalette('primaryPalette', {
            'default': '500',
            'hue-1': '50',
            'hue-2': 'A100',
            'hue-3': '900'
        })
        .accentPalette('indigo', {
            'default': '500',
            'hue-1': '50',
            'hue-2': '700',
            'hue-3': '900'
        })
        .warnPalette('pink');
});